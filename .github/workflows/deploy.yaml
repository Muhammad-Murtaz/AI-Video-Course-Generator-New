Continuous-Deployment:
  needs: Continuous-Integration
  runs-on: self-hosted   # ‚Üê change this from ubuntu-latest
  steps:
    - name: Deploy
      run: |
        aws ecr get-login-password --region ${{ secrets.AWS_DEFAULT_REGION }} \
          | docker login --username AWS --password-stdin ${{ secrets.AWS_ACCOUNT_ID }}.dkr.ecr.${{ secrets.AWS_DEFAULT_REGION }}.amazonaws.com
        docker pull ${{ secrets.AWS_ACCOUNT_ID }}.dkr.ecr.${{ secrets.AWS_DEFAULT_REGION }}.amazonaws.com/${{ secrets.ECR_REPO }}:latest
        docker stop app-container || true
        docker rm app-container || true
        docker run -d --name app-container --env-file /home/ubuntu/app/.env -p 8080:8080 \
          ${{ secrets.AWS_ACCOUNT_ID }}.dkr.ecr.${{ secrets.AWS_DEFAULT_REGION }}.amazonaws.com/${{ secrets.ECR_REPO }}:latest